<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pentest Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
</head>
<body>
    <div class="ui container">
        <h1 class="ui header">Pentest Dashboard</h1>
        <div class="ui segment">
            <canvas id="scanResultsChart"></canvas>
        </div>
        <div class="ui segment">
            <table class="ui celled table">
                <thead>
                    <tr>
                        <th>Scan Type</th>
                        <th>Results</th>
                    </tr>
                </thead>
                <tbody id="scanResultsTable">
                </tbody>
            </table>
        </div>
    </div>

    <script>
        $(document).ready(function() {
            $.getJSON('/scan_results', function(data) {
                var ctx = document.getElementById('scanResultsChart').getContext('2d');
                var chart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Nmap', 'Dirsearch', 'WhatWeb', 'Nikto', 'SSLscan', 'TestSSL'],
                        datasets: [{
                            label: 'Scan Results',
                            data: [
                                data.nmap.length,
                                data.dirsearch.length,
                                data.whatweb.length,
                                data.nikto.length,
                                data.sslscan.length,
                                data.testssl.length
                            ],
                            backgroundColor: 'rgba(75, 192, 192, 0.2)',
                            borderColor: 'rgba(75, 192, 192, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        scales: {
                            yAxes: [{
                                ticks: {
                                    beginAtZero: true
                                }
                            }]
                        }
                    }
                });

                var tableBody = $('#scanResultsTable');
                tableBody.append('<tr><td>Nmap</td><td>' + JSON.stringify(data.nmap) + '</td></tr>');
                tableBody.append('<tr><td>Dirsearch</td><td>' + JSON.stringify(data.dirsearch) + '</td></tr>');
                tableBody.append('<tr><td>WhatWeb</td><td>' + JSON.stringify(data.whatweb) + '</td></tr>');
                tableBody.append('<tr><td>Nikto</td><td>' + JSON.stringify(data.nikto) + '</td></tr>');
                tableBody.append('<tr><td>SSLscan</td><td>' + JSON.stringify(data.sslscan) + '</td></tr>');
                tableBody.append('<tr><td>TestSSL</td><td>' + JSON.stringify(data.testssl) + '</td></tr>');
            });
        });
    </script>
</body>
</html>